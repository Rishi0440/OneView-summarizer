<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Smart Summarizer</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a2d04c7325.js" crossorigin="anonymous"></script>

  <style>
   body {
  background: linear-gradient(to right, #d0d8e8, #d8cfea);
  color: #333;
  margin: 0;
  padding-top: 70px;
  min-height: 100vh;
  overflow-x: hidden;
}


    .navbar {
      background: rgba(255,255,255,0.7);
      backdrop-filter: blur(10px);
      padding: 12px 0;
    }

    .navbar-brand, .nav-link {
      color: #333 !important;
      font-weight: bold;
      font-size: 1.1rem;
    }

    /* FIXED HEIGHT for left-right layout so left side does NOT move */
    .main-flex {
      display: flex;
      gap: 40px;
      margin-top: 40px;
      height: calc(100vh - 120px);
      padding-bottom: 20px;
    }

    .left-box {
      flex: 1;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .left-box h2 {
      font-weight: 700;
      color: #222;
    }

    .left-box p {
      font-size: 1.1rem;
      color: #333;
      margin-top: 15px;
    }

    .right-box {
      flex: 1;
      overflow-y: auto;
      padding-right: 10px;
    }

   .glass-card {
  backdrop-filter: blur(10px);
  background: rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
  padding: 30px;
  color: #333;
}


    input, select, textarea, .form-control {
      border-radius: 10px;
      border: 1px solid #ccc;
      padding: 12px;
      width: 100%;
    }

    button {
      border-radius: 10px;
      padding: 10px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .summary-box {
      background: rgba(255,255,255,0.8);
      border-radius: 10px;
      padding: 15px;
      margin-top: 10px;
      white-space: pre-wrap;
    }
  </style>
</head>

<body>

<nav class="navbar fixed-top">
  <div class="container d-flex justify-content-between align-items-center">
    <a class="navbar-brand" href="/">ðŸ§  AI Smart Summarizer</a>
    <a class="nav-link" href="/pdf_parser"><i class="fa-solid fa-file-pdf"></i> PDF Parser</a>
  </div>
</nav>

<div class="container">

  <div class="main-flex">

    <div class="left-box">
      <h2><i class="fa-solid fa-wand-magic-sparkles"></i> Smart AI Summaries</h2>
      <p>
        Quickly summarize YouTube videos, articles, PDFs, and websites with accurate AI-powered insights.
      </p>
    </div>

    <div class="right-box">
      <div class="glass-card">

        <form method="POST" enctype="multipart/form-data">

          <div class="mb-3">
            <input type="text" name="generic_url" class="form-control"
                   placeholder="ðŸ”— Enter Website or YouTube URL">
          </div>

          <div class="mb-3">
            <input type="file" name="uploaded_pdf" class="form-control">
          </div>

          <div class="row mb-3">
            <div class="col-md-6">
              <select name="model_choice" class="form-select">
                <option value="llama-3.1-8b-instant">LLaMA 3.1 (8B Instant)</option>
               
              </select>
            </div>

            <div class="col-md-6">
              <input type="text" name="lang_pref" class="form-control"
                     value="en" placeholder="Language (en, fr, hi)">
            </div>
          </div>

          <div class="mb-3">
            <select name="summary_length" class="form-select">
              <option value="short">Short (~100 words)</option>
              <option value="medium" selected>Medium (~300 words)</option>
              <option value="long">Long (~600 words)</option>
            </select>
          </div>

          <button type="submit" class="btn btn-primary w-100">
            <i class="fa-solid fa-wand-magic-sparkles"></i> Summarize
          </button>
        </form>

        {% if pdf_length %}
          <div class="alert alert-info mt-3">
            PDF Length: {{ pdf_length }} pages
          </div>
        {% endif %}

        {% if summary %}
          <h5 class="mt-4"><i class="fa-solid fa-scroll"></i> Summary</h5>
          <div class="summary-box">{{ summary }}</div>
        {% endif %}

        {% if history %}
          <h5 class="mt-4"><i class="fa-solid fa-clock-rotate-left"></i> Recent Summaries</h5>

          <div class="accordion" id="historyAccordion">
            {% for item in history[-2:] %}
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#hist{{ loop.index }}">
                    {{ item.url }}
                  </button>
                </h2>

                <div id="hist{{ loop.index }}" class="accordion-collapse collapse">
                  <div class="accordion-body summary-box">{{ item.summary }}</div>
                </div>
              </div>
            {% endfor %}
          </div>
        {% endif %}

      </div>
    </div>

  </div>

</div>
<script>
document.querySelector("form").addEventListener("submit", function() {
    const btn = document.querySelector("button[type='submit']");
    btn.disabled = true;
    btn.innerHTML = `
      <span class="spinner-border spinner-border-sm"></span>
      Summarizing...
    `;
});
</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
